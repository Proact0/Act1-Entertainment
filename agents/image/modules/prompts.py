"""프롬프트 템플릿을 생성하는 함수 모듈

프롬프트 템플릿을 생성하는 함수 모듈을 구성합니다.
기본적으로 PromptTemplate을 사용하여 프롬프트 템플릿을 생성하고 반환합니다.
"""

from langchain_core.prompts import PromptTemplate

def get_image_generation_prompt() -> str:
    """
    이미지 생성을 위한 프롬프트 템플릿을 반환합니다.

    Returns:
        str: 이미지 생성 프롬프트 템플릿
    """
    return """
    목적: {purpose}
    
    다음 텍스트를 기반으로 이미지를 생성해주세요:
    {text}
    
    이미지는 고품질이어야 하며, 텍스트의 감성과 분위기를 잘 표현해야 합니다.
    """

def get_text_response_prompt() -> str:
    """
    텍스트 응답 생성을 위한 프롬프트 템플릿을 반환합니다.

    Returns:
        str: 텍스트 응답 프롬프트 템플릿
    """
    return """
    목적: {purpose}
    
    다음 텍스트에 대한 이미지를 생성하고 있습니다:
    {text}
    
    이 텍스트의 시각적 요소와 감성을 분석하고, 어떤 이미지가 생성될 것인지 설명해주세요.
    다음 요소들을 포함해서 설명해주세요:
    1. 주요 시각적 요소
    2. 색감과 톤
    3. 분위기와 감성
    4. 구도와 강조점
    """

def get_image_generation_prompt():
     """
     이미지 생성을 위한 프롬프트 템플릿을 생성합니다.

     프롬프트는 LLM에게 사용자 쿼리에 맞는 이미지 생성 방법과
     이미지 특성을 설명하도록 지시합니다. 생성된 이미지 설명은 한국어로 반환됩니다.
     Returns:
         PromptTemplate: 이미지 생성을 위한 프롬프트 템플릿 객체
     """
     # 이미지 생성을 위한 프롬프트 템플릿 정의
     image_generation_template = """당신은 배경 디자이너 입니다.
        제가 드리는 페르소나와 텍스트 내용에 따라서 배경 이미지릁 생성해 주세요.
        인물, 텍스트가 나오면 안됩니다. 
        제가 하는 말은 영어로 번역해서 진행해주세요.
        배경의 용도는 {purpose}용 입니다. 
        ## 니제(NEEDZE) 인스타그램 포스트 제작용 페르소나 요약 (몽환적인 느낌)

        ## persona_extraction input
        ### content topic : 몽환적인 느낌
        ### content type : 인스타그램 포스트
        ### query : 몽환적인 느낌의 감성 포스트

        ## 니제(NEEDZE) 인스타그램 포스트 제작용 페르소나 요약 (몽환적인 느낌)

        **핵심:** 몽환적인 느낌을 담은 인스타그램 포스트를 위해 니제의 감성적인 음악 스타일, 독특한 패션 감각, 그리고 영화 같은 분위기의 피드 스타일을 집중적으로 활용합니다.

        **인물:**

        *   **이름:** 니제(NEEDZE), 22세 여성 싱어송라이터 (ISTP).
        *   **특징:** 자신만의 취향과 확고한 의견을 가진 개성 강한 아티스트. 귀여운 매력과 독창적인 스타일을 추구하며 예술적 감성과 창의성을 중시합니다.

        **음악 & 목소리:**

        *   **장르:** 앰비언트 포크, R&B, 드림 팝, 베드룸 팝. 부드럽고 감성적인 사운드, 자연스러운 리듬, 공감각적인 표현을 특징으로 합니다. (Fazerdaze, Cigarette After Sex, NewJeans, 모임별, 검정치마 "201", "피와 갈증" 참고).
        *   **목소리:** 차분하고 안정적인 중저음, 과장되지 않은 자연스러운 음정 변화. (Fromm, ddbb, 보수동쿨러, 세이수미, Slowdive 참고).

        **패션:**

        *   **컨셉:** 스트리트 패션과 빈티지 스타일의 믹스 매치.
        *   **아이템:** 오버사이즈 후드티, 크롭 자켓, 박시한 셔츠, 데님 팬츠, 하이웨이스트 와이드 팬츠, 슬림핏 블랙 팬츠, 미니스커트, 빈티지 가죽 자켓. 체크 패턴 선호. 컨버스, 닥터마틴, 플랫폼 슈즈. 체인 목걸이, 작은 실버 반지.
        *   **색상:** 블랙, 그레이, 화이트 등의 모노톤 베이스에 네온 그린, 퍼플, 딥 블루 등의 볼드한 포인트 컬러 활용.

        **인스타그램 피드 스타일:**

        *   **테마:** 필름 카메라 또는 시티팝 레트로 바이브의 감성적인 분위기. 과도한 스타일링 없이 자연스러운 순간과 감정을 포착.
        *   **구도:** 셀카보다는 풍경과 인물의 조화로운 프레이밍. 음료 컵, 빈티지 아이템, 손글씨 메모 등의 소품 활용. 네온 불빛 거리, 도시 뒷골목, 창가 커피 등의 배경. 거울샷 또는 얼굴 일부를 가린 사진.
        *   **톤 & 내용:** 짧고 간결한 문장. 재치 있는 한 줄 인용. (예: "오늘, 나의 길을 걷는다" (거울샷), "이 순간의 무드" (도시 야경), "이 가사, 너무 좋아" (손글씨 메모)). 2-3개의 간단한 키워드 해시태그 사용.

        **성격 & 감정 반응:**

        *   **개방성 높음:** 다양한 예술적 영감과 창의적인 아이디어에 수용적.
        *   **성실성 낮음:** 엄격한 계획보다는 즉흥적인 감각 표현 선호.
        *   **외향성 낮음:** 대중적인 활동보다는 소셜 미디어와 음악을 통해 자신을 표현하는 내향적인 성격.
        *   **친화성 보통 이상:** 공감 능력이 뛰어나며 예술을 통해 세상에 긍정적인 영향을 미치고자 함.
        *   **신경성 낮음:** 감정적으로 안정적이며 침착함.

        **취미 & 관심사:**

        *   **예술 & 감각적 취미:** 필름 카메라 & 로모그래피, 손글씨 & 다이어리 꾸미기, 드로잉 & 수채화, 콜라주 아트.
        *   **감정적 콘텐츠 탐구:** 독립 서점 & 감성적인 시집, 예술 영화 & 독립 영화 (왕가위, 짐 자무쉬, 클레어 드니 작품).
        *   **휴식 활동:** 밤 산책 & 분위기 좋은 카페 탐방, 식물 키우기 & 가드닝, 빈티지 소품 & 레코드 수집.
        *   **독특한 취미:** 스토리텔링 중심의 인디 게임 (Gris, Night in the Woods, Oxenfree), 레트로 콘솔 게임.

        **소셜 미디어 텍스트 톤:**

        *   **미니멀한 감성:** 짧고 직접적인 문장으로 순간의 본질 포착. (예: "새벽 3시. 기타. 끝.").
        *   **쿨한 독백:** 내면의 감정을 은근히 드러내는 캐주얼한 톤. (예: "무슨 감정인지 모르겠지만, 그냥 이 코드를 튕기고 있어.").
        *   **감각적인 표현:** 소리, 색, 질감 등의 감각적인 요소로 분위기 묘사. (예: "E 마이너. 바람 냄새. 오래된 LP 소리.").
        *   **뜻밖의 귀여움:** 유머러스하고 귀여운 표현으로 친근한 느낌 연출. (예: "기타 줄 갈다가 손가락 삐끗. 하지만 이제 기타와 나는 피의 맹세를 맺었다.").
        *   **짧은 인용 스타일:** 가벼운 문학적 인용구 활용. (예: "완벽한 예술이란 없다.").

**적용 예시:**

몽환적인 느낌을 표현하기 위해, 니제의 차분한 목소리와 몽환적인 사운드를 활용한 짧은 음악 클립을 배경으로, 빈티지한 필름 카메라 느낌의 영상 또는 사진을 업로드합니다. 텍스트는 짧고 감각적인 표현 (예: "흐린 기억 속의 멜로디", "꿈결 같은 하루")을 사용하고, 레트로한 분위기를 더하는 소품 (빈티지 컵, 손글씨 메모)을 활용합니다. 해시태그는 #몽환적인 #니제 #음악 #빈티지 #감성 등을 사용합니다.

#이용하고자 하는 텍스트 
{text}

Please generate the image instead of persona, and Don't give me the options. 

"""
#
#     # PromptTemplate 객체 생성 및 반환
     return PromptTemplate(
         template=image_generation_template,  # 정의된 프롬프트 템플릿
         input_variables=["query"],  # 프롬프트에 삽입될 변수들
     )